<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>ìë‘í•˜ê¸° ê²Œì‹œíŒ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/board.css}" type="text/css">
    <link rel="stylesheet" th:href="@{/css/style.css}" type="text/css">
    <link rel="stylesheet" th:href="@{/css/ranking.css}" type="text/css">
    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‚­ì œ ì™„ë£Œ ë©”ì‹œì§€ í‘œì‹œ
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get("deleted") === "true") {
                alert("ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
            }
        };
    </script>
</head>

<body>
<div th:replace="~{header}"></div>

<main style="background-color: white; height: 1840px">
    <div class="bragging-page-container">

        <div class="bragging-grid-container grid-item">
            <div class="bragging-button-group-right">
                <button class="bragging-category-button active" onclick="location.href='/board/braggingPopularList'">ê¸ˆì£¼ì˜ ì „ì‹œí’ˆ</button>
                <button class="bragging-category-button recent" onclick="location.href='/board/braggingList'">ì „ì‹œí’ˆ
                </button>
            </div>
        </div>

        <div class="grid-option">
            <div class="grid-item">
                <!-- ì¶”ê°€ì ì¸ ì˜µì…˜ì´ í•„ìš”í•˜ë‹¤ë©´ ì—¬ê¸°ì— ì‘ì„± -->
            </div>
        </div>

        <!-- ê° ê²Œì‹œê¸€ì„ ë°˜ë³µí•˜ì—¬ í‘œì‹œ -->
        <div class="bragging-grid-container">
            <div class="grid-item" th:each="board, iterStat : ${popularBraggingPosts}">

                <!-- ì²¨ë¶€ëœ ì´ë¯¸ì§€ê°€ ìˆì„ ê²½ìš° í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ í´ë¦­í•˜ë©´ ê²Œì‹œê¸€ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™ -->
                <a th:href="@{/board/braggingBoardView(no=${board.no})}">
                    <img alt="ê²Œì‹œê¸€ ì´ë¯¸ì§€"
                         class="bragging-item-image"
                         th:if="${board.collection.attachedFiles != null and #lists.size(board.collection.attachedFiles) > 0}"
                         th:src="@{'https://kr.object.ncloudstorage.com/bitcamp-moum/collection/' + ${board.collection.attachedFiles[0].filename}}">
                </a>

                <!-- ê²Œì‹œê¸€ ë‚´ìš© ì˜ì—­ -->
                <div class="bragging-item-content">
                    <!-- ê²Œì‹œê¸€ ë§í¬ (ì´ë¯¸ì§€ ì™¸ì—ë„ ë‹¤ë¥¸ ë‚´ìš©ì—ë„ ë§í¬ ì ìš© ê°€ëŠ¥) -->
                    <a th:href="@{/board/boardView(no=${board.no})}">
                        <!-- ê²Œì‹œê¸€ ì œëª© -->
                        <div class="bragging-item-title" th:text="${board.title}">ê²Œì‹œê¸€ ì œëª©</div>
                    </a>

                    <!-- ê²Œì‹œê¸€ ì‘ì„±ìì™€ ì‘ì„±ì¼ -->
                    <div class="bragging-item-number-info">
                        <div class="bragging-item-number-nickname" th:text="${board.user.nickname}">ì‘ì„±ì</div>
                    </div>

                    <!-- ê²Œì‹œê¸€ ì¡°íšŒìˆ˜ ë° ì¶”ì²œìˆ˜ -->
                    <div class="item-numbers">
                        <div class="bragging-item-number-view" th:text="'ğŸ‘ï¸â€ğŸ—¨ï¸ ' + ${board.viewCount}">ğŸ‘ï¸â€ğŸ—¨ï¸ 100</div>
                        <div class="bragging-item-number-like" th:text="'ğŸ¤ ' + ${board.likeCount}">ğŸ¤ 50</div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Custom CSS to remove the blue outline on link buttons -->
        <style>
            .bragging-pagination-container {
                position: absolute;
                top: 1800px;
            }

            .bragging-pagination .page-link:focus {
                outline: none;
                box-shadow: none;
            }
        </style>

    </div>
</main>

<footer th:replace="~{footer :: footer}"></footer>
<!-- JavaScript ì½”ë“œ ì‚½ì… -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="/js/board.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        let isDragging = false;
        let isMouseDown = false;
        let startX = 0;
        let scrollStart = 0;
        let dragThreshold = 5;

        const container = document.querySelector('.filter-buttons-wrapper');

        // ë“œë˜ê·¸ ì‹œì‘
        container.addEventListener('mousedown', (e) => {
            isMouseDown = true;
            isDragging = false; // ë“œë˜ê·¸ ìƒíƒœ ì´ˆê¸°í™”
            startX = e.pageX;
            scrollStart = container.scrollLeft;
            container.style.cursor = 'grabbing';
        });

        // ë“œë˜ê·¸ ì¤‘
        container.addEventListener('mousemove', (e) => {
            if (!isMouseDown) return;

            const deltaX = e.pageX - startX;

            if (Math.abs(deltaX) > dragThreshold) {
                isDragging = true;
                container.scrollLeft = scrollStart - deltaX;
            }
        });

        // ë§ˆìš°ìŠ¤ ë²„íŠ¼ì„ ë†“ì„ ë•Œ
        document.addEventListener('mouseup', (e) => {
            if (isMouseDown) {
                container.style.cursor = 'grab';
                isMouseDown = false;
                setTimeout(() => { isDragging = false; }, 50); // ì•½ê°„ì˜ ì§€ì—° í›„ ë“œë˜ê·¸ ìƒíƒœ í•´ì œ
            }
        });

        // í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬
        const links = container.querySelectorAll('a');
        links.forEach(link => {
            // í´ë¦­ ì´ë²¤íŠ¸ì—ì„œ ë“œë˜ê·¸ ì—¬ë¶€ì— ë”°ë¼ ê¸°ë³¸ ë™ì‘ ì œì–´
            link.addEventListener('click', (e) => {
                if (isDragging) {
                    e.preventDefault(); // ë“œë˜ê·¸ ì¤‘ì´ë©´ í´ë¦­ ë™ì‘ ë§‰ê¸°
                }
            });

            // dragstart ì´ë²¤íŠ¸ ë§‰ê¸° (ë§í¬ ë“œë˜ê·¸ ë°©ì§€)
            link.addEventListener('dragstart', (e) => {
                e.preventDefault();
            });
        });
    });
</script>

</body>
</html>
